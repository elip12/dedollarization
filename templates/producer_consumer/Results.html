<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
th, td {
  padding: 15px;
}
</style>

{% extends "global/Page.html" %}
{% load otree %}

{% block title %}
    Results: Round {{ subsession.round_number }}
{% endblock %}

{% block content %}
    <p>
        This round, you were a {{ role_pre }}.
        <br>
        {% if token_color != Constants.trade_good %}
        You had a {{ token_color }} token.
        <br>
        {% endif %}
        You were randomly paired with a {{ other_role_pre }}.
        <br>
        {% if trade_attempted %}
        You attempted to trade.
        <br>
        {% else %}
        You did or could not attempt to trade.
        {% endif %}
        {% if trade_succeeded %}
        You successfully traded. You now have a
        {% if new_token_color != Constants.trade_good %}
        {{ new_token_color }} token.
        <br>
        {% if new_token_color == Constants.red %}
        <img src="{% static "producerConsumerImages/redCoin.png"%}"/>
        {% endif %}
        {% if new_token_color == Constants.blue %}
        <img src="{% static "producerConsumerImages/blueCoin.png"%}"/>
        {% endif %}
        {% else %}
        trade good.
        <br>
        <img src="{% static "producerConsumerImages/object.png"%}"/>
        {% endif %}
        <br>
        {% endif %}
        You earned {{ round_payoff|c }} points this round.
        <br>
        Your total payoff so far is {{ player.participant.payoff|c }}.   
    </p>

    <table>
        <tr>
            <th>Round</th>
            <th>Your Group</th>
            <th>Your Item</th>
            <th>Partner's Item</th>
            <th>Traded</th>
            <th>Payoff</th>

            {% for p in player.in_all_rounds %}
            <tr>
                <th>{{ p.round_number }}</th>
                <th>{{ p.group_color }}</th>
                <th>{{ p.token_color }}</th>
                <th>{{ p.other_token_color }}</th>
                <th>{{ p.trade_succeeded }}</th>
                <th>{{ p.payoff }}</th>
            </tr>
            {% endfor %}
                      
    </table>
    <br>

    <table>
            <tr>
                <th>Foreign Currency Transactions Accepted</th>
                {% for r in subsession.in_all_rounds %}
                <tr>
                    <th>{{ r.fc_transactions }}</th>
                </tr>
                {% endfor %}
    </table>

    <br>
    {% next_button %}
{% endblock %}
